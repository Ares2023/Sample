<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="UTF-8">
    <title>AWS認定ソリューションアーキテクト - アソシエイト模擬試験</title>
    <style>
        body {
            font-family: sans-serif;
            padding: 20px;
            line-height: 1.6;
        }

        .breadcrumb {
            margin-bottom: 20px;
            font-size: 1em;
            color: #666;
        }

        .breadcrumb a {
            text-decoration: none;
            color: #007bff;
        }

        .breadcrumb a:hover {
            text-decoration: underline;
        }

        .breadcrumb span {
            font-weight: bold;
            color: #333;
        }

        .question {
            margin-bottom: 30px;
            padding: 15px;
            border: 1px solid #ccc;
            border-radius: 8px;
        }

        .summary {
            font-weight: bold;
            font-size: 1.2em;
            margin-top: 20px;
        }

        .explanation {
            display: none;
            padding-top: 10px;
            border-top: 1px dashed #eee;
            margin-top: 10px;
            font-size: 0.9em;
        }

        .explanation.visible {
            display: block;
        }

        .question-header {
            margin-bottom: 10px;
        }

        .question-options label {
            display: block;
            margin-bottom: 5px;
            cursor: pointer;
            padding: 5px;
            border-radius: 5px;
            transition: background-color 0.3s;
        }

        .question-options input[type="radio"],
        .question-options input[type="checkbox"] {
            margin-right: 10px;
        }

        /* --- 回答フィードバック用のスタイルを追加 --- */
        label.correct-choice {
            background-color: #e0ffe0;
            /* 正解の選択肢の背景を薄い緑に */
            border: 1px solid green;
        }

        label.incorrect-choice {
            background-color: #ffe0e0;
            /* 不正解の選択肢の背景を薄い赤に */
            border: 1px solid red;
        }


        button {
            padding: 10px 20px;
            margin-right: 10px;
            cursor: pointer;
            background-color: #007bff;
            color: white;
            border: none;
            border-radius: 5px;
            margin-top: 5px;
        }

        button:hover {
            background-color: #0056b3;
        }

        .toggle-explanation-btn {
            background-color: #6c757d;
            padding: 5px 12px;
            font-size: 0.8em;
            margin-top: 10px;
        }

        .toggle-explanation-btn:hover {
            background-color: #5a6268;
        }

        .result-pass {
            color: green;
        }

        .result-fail {
            color: red;
        }
    </style>
</head>

<body>

    <h1>AWS認定ソリューションアーキテクト - アソシエイト 総仕上げ問題</h1>
    <h3>※このページは提供されたPDFからAIを用いて作成したものです。<br>合格目指して頑張ってください！</h3>
    <p></p>

    <div id="quiz"></div>

    <button onclick="shuffleAndRegenerate()">問題をシャッフル</button>
    <button onclick="grade()">採点する</button>
    <button onclick="showAllAnswers()">すべての解説を表示</button>
    <button onclick="clearAllHighlights()">ハイライトを消去</button>


    <h2 id="score" class="summary"></h2>

    <script>
        const questions = [
            { q: "1. ある企業では、企業内で共有するファイルサーバーとしてWindowsサーバーを使用しています。SMBプロトコルを使用してWindowsフォルダ共有や、複数のWindowsサーバー間での複製(DFSレプリケーション) を実現しています。ソリューションアーキテクトであるあなたは、このファイル共有の仕組みをAWSに移行することで、構築・運用のコストを削減したいと考えています。移行先として適切なAWSサービスは、次のうちどれですか。", options: ["Amazon EFS", "Amazon S3", "Amazon FSx for Windows", "Amazon EBS", "Amazon FSx for Lustre"], correct: "c", explanation: "正解: C<br>この問題では、Windowsサーバーによるファイル共有の仕組みを移行する場合に適切なAWSサービスの選択が求められています。Amazon FSx for Windowsは、Windowsファイル共有で標準的に用いられるSMBプロトコルを介してアクセスできる、信頼性が高くスケーラブルな完全マネージド型のファイルストレージサービスです。Windows Server上に構築されており、クォータ機能やMicrosoft Active Directory統合など、Windows Server標準の幅広い管理機能を提供します。したがって、Cが正解です。<br>A. Amazon EFSはNFSの機能を提供しており、複数のEC2 インスタンスから利用できますが、設問の要件には合いません。<br>B. Amazon S3は、オブジェクトストレージサービスです。<br>D. Amazon EBSは永続可能なブロックストレージサービスで、EC2インスタンスにアタッチすることで利用できます。<br>E. Amazon FSx for Lustreは、高性能ファイルシステムであるLustreファイルシステムをフルマネージド型で利用できるサービスです。" },
            { q: "2. あなたの会社では、社内向けWebアプリケーションを運用しています。フロントエンド処理とバックエンド処理の2つのバッチモジュールで構成されており、フロントエンドで処理を受け付けたあとに、バックエンド処理に連携しています。このWebアプリケーションのユーザー数が増加し、バックエンド処理に時間がかかっています。そこでAmazon ECSに移行し、マイクロサービス化を行い、ユーザー数の増加に耐えるアーキテクチャにすることを検討しています。次のうち、どのソリューションが適切ですか。", options: ["フロントエンド処理とバックエンド処理の連携にAmazon SQSを使用して、SQSキューからデータを取り出す", "フロントエンド処理とバックエンド処理の連携にAmazon SNSを使用し、データをトピック通知する", "フロントエンド処理とバックエンド処理の連携にAmazon S3を使用し、S3バケットに登録されたデータをトリガーとする", "フロントエンド処理とバックエンド処理の連携にAmazon EFSを使用し、データを共有する"], correct: "a", explanation: "正解: A<br>設問では、フロントエンド処理とバックエンド処理の連携方法が問われています。Amazon SQSを利用することで、大量の処理や時間がかかる処理を行う必要がある場合でも、フロントエンド処理からの依頼をSQSでキューイングし、バックエンドへ処理を連携かつ並列化することができます。したがって、Aが正解です。<br>B. Amazon SNSはメッセージ通知サービスですが、マイクロサービス間での処理連携としては適切な用途ではありません。<br>C. Amazon S3はオブジェクトストレージサービスです。<br>D. Amazon EFSは、EC2インスタンス間でファイル共有を提供するサービスですが、処理の連携という観点では適切ではありません。" },
            { q: "3. ある企業では、アプリケーションで使用するデータベースとして、Amazon RDS for MySQLを採用しています。データベースには1TBの汎用SSDボリューム (gp3) ストレージが装備され、すでに数百万行のレコードが保存されています。アプリケーションの利用者増加により、データベースに対して大量のデータの追加と更新が発生し、それがアプリケーションのレスポンスに影響を及ぼしていることがわかりました。企業では、原因がストレージのパフォーマンスにあると判断しました。この問題を解決するために適切な対応は、次のうちどれですか。", options: ["RDSリードレプリカを構築して、アプリケーションの参照先を変更する", "ストレージタイプをスループット最適化HDD (st1) に変更する", "DBインスタンスをメモリ最適化インスタンスクラスに変更する", "ストレージタイプをプロビジョンドIOPS SSD (io1) に変更する"], correct: "d", explanation: "正解: D<br>多数の読み取りや書き込み性能が求められるデータベースには、一般的に低レイテンシーかつ高スループットな性能を実現できるストレージタイプを選択する必要があります。プロビジョンドIOPS SSDは、最もパフォーマンスが高く、ミッションクリティカルなデータベースなどで利用されるケースが多いです。したがって、Dが正解です。<br>A. リードレプリカは読み込みパフォーマンスの解消をすることはできますが、問題文にある大量のデータの追加と更新のパフォーマンスは改善しません。<br>B. スループット最適化HDDは、高いスループットを必要とするアクセス頻度の高いデータ向けの低コストHDDです。そのため、高いIOPSが求められるこのケースには適しません。<br>C. 原因がストレージのパフォーマンスにあると問題文にあるため、インスタンスクラスを変更してもパフォーマンスは改善されません。" },
            { q: "4. ソリューションアーキテクトであるあなたは、Amazon EC2インスタンス間で低いネットワークレイテンシーと高いネットワークスループットを必要とする新しいアプリケーションのアーキテクチャを設計しています。これを実現するために選択するソリューションとして、適切な項目は次のうちどれですか。", options: ["AWS Auto Scaling", "クラスタープレイスメントグループ (クラスター配置グループ)", "パーティションプレイスメントグループ(パーティション配置グループ)", "スプレッドプレイスメントグループ (スプレッド配置グループ)"], correct: "b", explanation: "正解: B<br>プレイスメントグループとは、Amazon EC2 インスタンスを論理的にグループ化したものです。プレイスメントグループの機能を利用してグループ化すると、そのグループ化したEC2インスタンス間での通信は、通常のEC2インスタンス間通信よりもさらに高速になります。クラスタープレイスメントグループは、EC2インスタンスを同じラックに配置することで、インスタンス間の通信を高速に行えるため、低レイテンシーかつ高スループットなネットワークが求められるアプリケーションに適しています。したがって、Bが正解です。<br>A. AWS Auto Scalingは、自動スケーリングと予測スケーリングの機能を持つサービスです。<br>C. パーティションプレイスメントグループは、EC2インスタンスをパーティション単位で異なるラックに配置します。分散処理に適しています。<br>D. スプレッドプレイスメントグループは、すべてのEC2インスタンスを異なるラックに配置します。障害発生時の影響を低減したいシステムに適しています。" },
            { q: "5. Amazon S3を利用した特定の会員向けの画像共有サイトがあります。会員以外の不特定多数の人がこのサイトにアクセスし、画像をダウンロードしているとの報告がありました。この状況を解決するには、どのような方法をとればよいでしょうか(2つ選択)。", options: ["有効期限付きの署名付きURLを使用する", "Amazon S3では会員だけに画像を共有するといったことができないため、WebサーバーのEBSボリュームに写真を保存する", "セキュリティグループを利用して会員のIPアドレスのみアクセスを許可する", "Amazon S3の一般公開用のアクセス権を削除する"], correct: ["a", "d"], explanation: "正解: A, D<br>Amazon S3を利用することで、外部へのファイルの公開が簡単に行えますが、適切に設定しなければ想定していないユーザーからのアクセスを許してしまうことになります。S3には、パブリックアクセスというアクセス制御機能があります。不特定多数のユーザーへのファイル公開が不要な場合は、この権限を設定しないようにします。S3では、適切な権限を設定することで、セキュアに特定のユーザーにファイルへのアクセスを許可することができます。また、有効期限付きの署名付きURLを使用することで、このURLを通知したユーザーにだけ、ファイルのダウンロードを一定時間許可することができます。したがって、AとDが正解です。なお、会員の増減に合わせてアクセス元のIPアドレスを管理することは運用上難しく、現実的な対応ではありません。" },
            { q: "6. VPC内のアプリケーションから、Amazon DynamoDBに接続するシステムをAWS上で構築したいと考えています。ただし、アプリケーションとDynamoDBへはインターネット経由での接続が許可されていないため、同じリージョン内でプライベート接続しなければいけません。この状況で利用するサービスとして、適切なものはどれですか。", options: ["VPCピアリング", "AWS Direct Connect", "NATゲートウェイ", "VPCエンドポイント"], correct: "d", explanation: "正解: D<br>VPCエンドポイントは、Amazon S3やAmazon DynamoDBへアクセスする際に、インターネットを経由せずAWS内のプライベート接続を実現するサービスです。指定されたルートへのターゲットを、ルートテーブルに設定することで利用できます。したがって、Dが正解です。<br>A. VPCピアリングは、異なるVPC間をプライベート接続するサービスで、AWSサービスへの接続経路を作るものではありません。<br>B. AWS Direct Connectは、オンプレミス環境とAWSの間を専用線で接続するサービスなので、AWSサービスへの接続経路を作るものではありません。<br>C. NATゲートウェイは、プライベートサブネットのEC2 インスタンスからインターネットへ接続するためのNATサービスです。AWSサービスへの経路を作ることはできますが、インターネット経由となってしまいます。" },
            { q: "7. ある企業では現在、業務アプリケーションを開発しています。このアプリケーションのデータを格納するデータベースは、多くの業務データを頻繁に登録・更新・削除することに耐えられる性能が求められています。また、格納されたデータからレポートを生成するために、複数のテーブルを結合してデータを取得することを想定しています。さらに、今後のデータの増加量に備えて、データベースのストレージを自動拡張する機能も求められています。これらの要求を満たすことができる、最も適切なサービスはどれですか。", options: ["Amazon DynamoDB", "Amazon Glacier", "Amazon Aurora", "Amazon Redshift", "Amazon S3"], correct: "c", explanation: "正解: C<br>Amazon Auroraは、マネージド型のリレーショナルデータベースサービスであるAmazon RDSがサポートしているデータベースエンジンの1つです。頻繁にデータの更新・削除が行われるデータベースに向いており、SQLを発行して複数のテーブルを結合し、結合したテーブルから対象のデータを取得することもできます。また、Auroraはフルマネージド型のデータベースサービスであるため、データ量に応じてストレージを自動拡張する機能も備えています。したがって、Cが正解です。RDSでは、AuroraのほかにMySQLやPostgreSQLなどのデータベースもサポートしています。<br>A. Amazon DynamoDBはNoSQLデータベースサービスで、キーとなるIDを指定することでデータベースに格納されているバリューを取得します。一般的なリレーショナルデータベースのようにSQLを利用したデータの取り出しはできません。<br>B. Amazon S3 Glacierは、長期的にアーカイブを格納するのに優れたオブジェクトストレージです。<br>D. Amazon Redshiftは列指向のアーキテクチャを持ち、大量データの集計・分析に適したデータウェアハウスサービスです。<br>E. Amazon S3は、大容量のデータを格納できる耐久性の高いオブジェクトストレージサービスです。" },
            { q: "8. ある企業では、アプリケーションのユーザー数が1年間で5倍になると予想しています。このアプリケーションは1つのリージョンでホストされ、Amazon RDSのMySQL データベース、Application Load Balancer、Amazon EC2を使用して、静的コンテンツと動的コンテンツをホストするWebサイトとそのマイクロサービスをホストします。この企業の成長をサポートするためには、どのような設計変更を推奨する必要がありますか(2つ選択)。", options: ["EC2からS3に静的ファイルを移動する", "Amazon Route 53の位置情報ルーティングポリシーを使用する", "リアルタイムのCloudTrailログに基づいて環境をスケーリングする", "マイクロサービスごとに専用のElastic Load Balancingを作成する", "RDSリードレプリカを作成し、これらのレプリカを使用するようにアプリケーションを変更する"], correct: ["a", "e"], explanation: "正解: A, E<br>この問題では、今後アクセスの増加が見込まれるアプリケーションのパフォーマンスを、どのように向上させるかを考える必要があります。Amazon EC2はインスタンスタイプが決まっており、アクセス負荷に応じて都度調整する必要があります。このため、Amazon S3を利用したほうがアクセス増加にも適切に対応できると考えられます。また、Amazon RDSのリードレプリカを用意することで、読み取りスループットとパフォーマンスを向上させることができます。したがって、AとEが正解です。<br>B. このアプリケーションは1つのリージョンにしかホストされていないため、Amazon Route 53の位置情報ルーティングを利用する効果はないと考えられます。<br>C. AWS CloudTrailは、AWSアカウントで利用された操作 (APIコール) のログを取得するため、アプリケーションのアクセス負荷をモニタリングすることはできません。" },
            { q: "9. ある企業では、company.comというZone Apexを使用して静的なWebサイトを公開しています。このWebサイトでは、DNSにAmazon Route 53を使用したいと考えています。スケーラブルで費用対効果の高い構成は、次のうちどれですか (2つ選択)。", options: ["EC2 インスタンス上にWebサイトを構築し、Amazon Route 53のエイリアスとしてEC2インスタンスのパブリックIPアドレスを紐付ける", "AWS CloudFormationを使用してWebサイトを構築し、Amazon Route 53のエイリアスとしてCloudFormationスタックを紐付ける", "Amazon S3上のコンテンツを静的Webサイトホスティングで公開し、Amazon Route 53のエイリアスとしてS3のエンドポイントを紐付ける", "Elastic Load BalancingとAuto Scalingを使用してEC2上にWebサイトを構築し、Amazon Route 53のエイリアスとしてElastic Load Balancingのエンドポイントを紐付ける"], correct: ["c", "d"], explanation: "正解: C, D<br>Amazon Route 53のエイリアスは、Elastic Load Balancing (ELB) やAmazon CloudFrontに対してZone Apexレコードを設定することができます。Amazon Route 53、Amazon S3、ELB、CloudFrontはいずれもAWSのマネージドサービスであり、これらを組み合わせて静的Webサイトを構成することで、負荷に応じた費用対効果の高いスケーラビリティが実現できます。したがって、CとDが正解です。<br>EC2 インスタンスのパブリックIPアドレスやCloudFormationスタックに対して紐付けすることはできません。" },
            { q: "10. ある企業では、パブリックサブネットとプライベートサブネットで実行されている2層Webアプリケーションが稼働しています。アプリケーション層はパブリックサブネットで、データベース層はプライベートサブネットで稼働しており、いずれも単一のアベイラビリティーゾーン (AZ) のAmazon EC2インスタンス上で実行されています。このアーキテクチャで高可用性を実現するには、次のうちどの方法を組み合わせる必要がありますか (2つ選択)。", options: ["同じAZに新しいパブリックサブネットとプライベートサブネットを作成する", "複数のAZにまたがるEC2のAuto ScalingグループとApplication Load Balancerを作成する", "既存のWebアプリケーションインスタンスをApplication Load BalancerのAuto Scaling グループに追加する", "別のAZに新しいパブリックサブネットとプライベートサブネットを作成し、単一のAZのEC2インスタンスにデータベースを構築する", "別のAZに新しいパブリックサブネットとプライベートサブネットを作成し、データベースをAmazon RDSのマルチAZ配置に移行する"], correct: ["b", "e"], explanation: "正解: B, E<br>設問の2層Webアプリケーションは、アプリケーション層、データベース層とも単一のアベイラビリティーゾーン (AZ) で動作するEC2インスタンス上で実行されています。設問で問われている「高可用性を実現する」ためには、地理的に離れた冗長化を行うことがポイントです。複数のAZにまたがるEC2インスタンスのAuto Scalingを実行することで、地理的に離れた冗長化を実現できます。また、Application Load Balancer (ALB) を組み合わせることで、EC2インスタンスに障害が発生しても通信を適切に振り分けることができます。また、データベース層をAmazon RDSのマルチAZ配置にすることで、AZをまたぐ地理的に離れた冗長化を実現でき、障害が発生しても自動で切り替わるため、高可用性を実現することができます。したがって、BとEが正解です。<br>A. 同じAZにサブネットを作成しても、AZをまたぐ地理的に離れた冗長化を行うことができません。<br>C. 既存のWebアプリケーションは単一のAZで実行されているため、ALBを組み合わせても、AZをまたいでの冗長化を行うことはできません。<br>D. 別のAZに新しいサブネットを作ったとしても、EC2インスタンスが単一のAZ で稼働しているのでは高可用性を実現することはできません。" },
            { q: "11. あなたの会社では、顧客企業向けのアプリケーションをAWS上に構築しています。アプリケーションで利用する画像をAmazon RDSのMySQL データベースに格納していますが、画像は日々増加しており、画像へのアクセスも非常に多いため、コスト削減とパフォーマンス向上の対策を行うよう依頼されました。次のうち、適切な対応方法はどれですか。", options: ["Amazon RDSのMySQL データベースのリードレプリカを利用する", "画像ファイルのうち、特に頻繁に使用される1割の画像ファイルのみAmazon RDSのMySQL データベースに格納し、残りをAmazon S3 Glacierに移行する", "画像ファイルをすべてAmazon EBSに移行し、顧客からはAmazon CloudFrontを介して画像にアクセスできるようにする", "画像ファイルをすべてAmazon S3に移行し、顧客からはAmazon CloudFrontを介して画像にアクセスできるようにする"], correct: "d", explanation: "正解: D<br>AWSには、Amazon CloudFrontというコンテンツ配信ネットワーク (CDN: Content Delivery Network) サービスがあります。このサービスを利用することで、画像・動画などのコンテンツを安全かつ高速に配信することが可能になります。CloudFrontは、設問にあるような静的コンテンツである画像ファイルだけでなく、動画ファイルなどのWebコンテンツもキャッシュすることができます。また、画像ファイルをAmazon S3に格納することで、コストを抑えることができます。したがって、Dが正解です。" },
            { q: "12. あなたの会社のシステムは、ハードウェア保守期限切れに伴い、1ヵ月以内に複数のアプリケーションをAWSクラウドへ移行する必要があります。各アプリケーションごとに約50TBのデータを転送する必要があり、移行完了後は自社とAWSの間で安全かつ安定したスループットを持つネットワーク接続が必要です。あなたは、初回のデータ移行と移行後の安定したネットワークをどのように用意しますか。", options: ["初回のデータ移行および継続的なネットワークにAWS Direct Connectを利用する", "初回のデータ移行および継続的なネットワークにSite to Site VPNを利用する", "初回のデータ移行にAWS Snowball、継続的なネットワークにAWS Direct Connectを利用する", "初回のデータ移行にAWS Snowball、継続的なネットワークにSite to Site VPNを利用する"], correct: "c", explanation: "正解: C<br>一度に大量のデータをAWSへ転送する手段として、AWS Snowballは非常に有効です。移行後も、Direct Connectであれば安全かつ安定したスループットを維持することが期待できます。したがって、Cが正解です。<br>A. 複数のアプリケーションの総データ量が非常に多いため、AWS Direct Connectでは初回のデータ移行が1ヵ月以内に間に合わない可能性があります。<br>B. Site to Site VPNでも同様に、初回のデータ移行が1か月以内に間に合わない可能性があるうえ、移行後も安定したスループットを維持することは難しいと考えられます。<br>D. データ移行後、Site to Site VPNでは安定したスループットを維持することは難しいと考えられます。" },
            { q: "13. ある企業では、Application Load Balancerに登録されたAmazon EC2 インスタンスでWebサービスを実行しています。EC2インスタンスは、2つのアベイラビリティーゾーン (AZ)にまたがるAuto Scaling グループで実行されます。このアプリケーションは、必要なSLAを満たすために最低4台のEC2インスタンスを必要としています。1つのAZに障害が発生した場合、この企業がより低コストでSLAを維持し続けるためには、次のうちどの戦略を採用すればよいでしょうか。", options: ["クールダウン期間が短いスケーリングポリシーを追加する", "Auto Scaling グループの起動設定を変更して、より大きなインスタンスタイプを使用する", "Auto Scalingグループを変更して、3つのAZで合計6台のEC2インスタンスを使用する", "Auto Scalingグループを変更して、2つのAZで合計8台のEC2インスタンスを使用する"], correct: "c", explanation: "正解: C<br>3つのアベイラビリティーゾーン (AZ) で合計6台のAmazon EC2 インスタンスが稼働していることから、1つのAZあたり2台稼働していることがわかります。1つのAZに障害が発生しても、残りの2つのAZで最低4台で稼働することができます。したがってCが正解です。<br>A. クールダウンを設定することで、コストを適切に管理することができるかもしれませんが、EC2インスタンスを最低4台維持し続けるための機能ではないため、SLAを維持することはできません。<br>B. インスタンスタイプを変更することはパフォーマンスを最適化するための方法であり、SLAを維持することとは関係ありません。<br>D. 2つのAZで合計8台EC2インスタンスが稼働していることから、1つのAZあたり4台稼働していることがわかります。1つのAZに障害が発生しても残りのAZで最低4台で稼働することができますが、通常稼動時は8台稼働することになり、Cの6台よりもコストが高くなってしまうため、適切ではありません。" },
            { q: "14. あなたはAmazon EC2 インスタンス上で動作するアプリケーションを構築し、データベースとしてAmazon DynamoDBを使用することを考えています。このアプリケーションでは、EC2インスタンスからDynamoDBのデータを書き込みできなければいけません。キーペア(アクセスキーIDとシークレットアクセスキー) のEC2インスタンスへの格納が許可されていない場合の説明として、適切な項目はどれですか(2つ選択)。", options: ["Amazon DynamoDBへの書き込みを可能にするIAMロールを作成する", "Amazon DynamoDBへの書き込みはIAMロールの権限がなくても可能である", "実行中のEC2インスタンスにIAMユーザーを追加する", "Auto Scalingの起動設定にIAMロールが含まれているEC2インスタンスを起動する"], correct: ["a", "d"], explanation: "正解: A, D<br>Amazon EC2 インスタンスからAmazon DynamoDBを利用するには、利用する機能に応じた権限が必要です。設問の場合は、EC2インスタンスからDynamoDBに書き込みを行うため、EC2インスタンスに対してDynamoDBへの書き込みを可能にするIAMロールを作成します。Auto Scalingを使用する場合は、起動設定で上記のIAMロールを設定します。したがって、A、Dが正解です。" },
            { q: "15. あなたの会社ではWebマーケティングを目的に、各ユーザーのWebサイト上での動きを追跡し、リコメンデーションを発信しています。EC2インスタンス上でユーザーのアクセスログをほぼリアルタイムで収集し、Amazon RDSに保存しています。保存されたログを別のEC2インスタンスがリアルタイムでチェックし、SQLクエリによりリコメンデーションを作成しています。ソリューションアーキテクトであるあなたは、現在のアーキテクチャを疎結合にし、SQLでリアルタイムデータを分析したいと考えています。次のうち適切なソリューションを選びなさい。", options: ["Amazon SNSを使用し、Webサイトからのアクセスログを受信したあとに、AWS Lambdaに連携してLambdaからSQLクエリを実行する", "Amazon SQSを使用し、Webサイトからのアクセスログを受信したあとに、現在のEC2インスタンスにデータを連携する", "Amazon Kinesis Data Streamsを使用し、Streamsを使用し、Webサイトからのアクセスログを受信したあとに、Amazon Kinesis FirehoseでS3にデータを保存する。保存されたデータをAmazon AthenaでSQL分析する", "Amazon Kinesis Data Streamsを使用し、Webサイトからのアクセスログを受信したあとに、Amazon Kinesis Data AnalyticsでSQL分析する。Amazon Kinesis FirehoseでS3にデータを保存する"], correct: "d", explanation: "正解: D<br>Amazon Kinesisは、リアルタイムに流れてくる大量のデータを処理するサービスです。Kinesisのサービスの1つであるAmazon Kinesis Data Streamsでは、ストリーミングデータをほぼリアルタイムで収集でき、収集されたデータはAmazon Kinesis Data FirehoseによってAmazon S3やAmazon RDSなどに保存ができます。加えて、Amazon Kinesis Data Analyticsと連携すると、ストリーミングデータに対してSQLクエリを実行し、リアルタイム分析が行えます。したがって、Dが正解です。<br>A. B. Amazon SQSやAmazon SNSで疎結合なアーキテクチャに構成することはできますが、リアルタイム処理やSQL分析についてはKinesisが向いています。<br>C. Amazon Athenaに保存したあとに分析を行うこともできますが、リアルタイム性の要件を加味するとKinesisが適しています。" },
            { q: "16. 世界中の会員に動画を配信するサービスで、一部の国や地域の会員より、アクセスしてから再生されるまでに時間がかかるという指摘が寄せられています。アクセスする地域に関係なく、アクセスから再生までの時間を短縮する方法として適切な項目は、次のうちどれですか。", options: ["Amazon S3に動画ファイルを格納し、URLに直接アクセスさせる", "Amazon S3に動画ファイルを格納し、署名付きURLを利用する", "EC2 インスタンス上でWebサーバーを起動し、動画ファイルをEBSボリュームに格納する", "Amazon CloudFrontの署名付きURLを利用する"], correct: "d", explanation: "正解: D<br>Amazon CloudFrontは、「エッジロケーション」と呼ばれるグローバルに遍在する拠点からコンテンツを配信するCDN (Content Delivery Network) サービスです。高可用性で高パフォーマンス、低レイテンシーなネットワークを備えています。CloudFrontの署名付きURLを利用すると、ユーザーはコンテンツのダウンロードやストリーミング配信ができます。その他の方法でも動画配信は可能ですが、設問の「アクセスする地域に関係なく、アクセスから再生までの時間を短縮する」ことに最も適した方法はDになります。" },
            { q: "17. あなたの会社では、多くの顧客が利用するWebアプリケーションを運営しています。あなたは、このシステムのデータが格納されているAmazon RDSのMySQL データベースが、ボトルネックにならないように対応を依頼されました。MySQLデータベースがボトルネックになるのを防ぐために効果的な方法は、次のうちどれですか (2つ選択)。", options: ["ELBのClassic Load BalancerをWebアプリケーション層の前に配置する", "Amazon RDSのリードレプリカを利用する", "Amazon RDSのMySQL データベースの前にAmazon ElastiCacheを配置する", "Amazon RDSのMySQLデータベースのマルチAZ機能を利用する"], correct: ["b", "c"], explanation: "正解: B, C<br>Amazon RDSのリードレプリカとは、マスターデータベースと同じデータベースを複製し、読み取り専用として構築したものです。リードレプリカを利用することで、読み取り頻度の高いデータベースを増設できるため、読み取りスループットを増やし、パフォーマンスを向上させることができます。Amazon ElastiCacheはマネージド型のインメモリデータベースです。メモリ上で処理を実行するため、データをキャッシュすることで、データベースの負荷軽減を実現します。したがって、B、Cが正解です。" },
            { q: "18. Amazon Auroraの特徴として、誤っている説明は次のうちどれですか。", options: ["マネージド型のサービスである", "MySQLやPostgreSQLよりもスループットが高い", "3つのアベイラビリティーゾーン (AZ) にデータが格納されるため耐久性が高い", "列指向のアーキテクチャで、大量データの集計・分析に向いている", "リレーショナルデータベースサービスである"], correct: "d", explanation: "正解: D<br>Amazon Auroraはマネージド型のリレーショナルデータベース (RDB) サービスです。スループットはMySQLの5倍、PostgreSQLの3倍を実現するとされています。データは3カ所のアベイラビリティーゾーン (AZ) に格納されます。Auroraは、一般的なRDBと同様の行指向のRDBサービスです。列指向のアーキテクチャを持ち、大量データの集計・分析に適しているサービスはAmazon Redshiftです。したがって、誤っている説明はDです。" },
            { q: "19. Amazon Redshiftのクラスターの冗長性を高めるための方法として、適切な項目は次のうちどれですか。", options: ["より性能の高いインスタンスタイプに変更する", "クロスリージョンスナップショットを設定する", "Redshift Data Sharingで別のクラスターにデータを共有する", "ノード数を増やす"], correct: "d", explanation: "正解: D<br>ノード数を増やすと複数のデータベースがクラスター化され、耐障害性が高まります。したがって、Dが正解です。<br>A. より性能の高いインスタンスタイプに変更すると処理性能は向上しますが、冗長性を高めることにはなりません。<br>B. クロスリージョンスナップショットにより別のリージョンへのバックアップができますが、冗長性を高めることにはなりません。<br>C. Redshift Data Sharingはデータを別のクラスターに共有する機能であるため、クラスターの冗長性は向上しません。" },
            { q: "20. Webサーバーが、ある特定のIPアドレスから不正アクセスを受けていることが判明しました。このIPアドレスからの接続を拒否したい場合、どのサービスあるいは機能で対応すればよいでしょうか。", options: ["インターネットゲートウェイ", "ネットワークACL", "AWS Direct Connect", "Amazon API Gateway"], correct: "b", explanation: "正解: B<br>ネットワークACLはVPC内に構成されたサブネットに対するファイアウォール機能で、特定のIPアドレスからのアクセスを制御することができます。したがって、Bが正解です。<br>A. インターネットゲートウェイはVPC内のリソースからインターネットへアクセスするためのゲートウェイで、アクセス制御を行うためのものではありません。<br>C. AWS Direct Connectは、オンプレミス環境とAWSの間を専用線で接続するサービスです。<br>D. Amazon API Gatewayは、APIの作成、配布、保守、監視、保護を簡単に行えるサービスで、アクセス制御を行うためのサービスではありません。" },
            { q: "21. あなたの会社では、多くの会員が利用する画像ファイル共有のためのWebアプリケーションを設計しています。画像ファイルの格納にはAmazon S3を利用する予定ですが、画像ファイルをアップロードする際に経由するWebサーバーのトラフィックが、大きくなるのを避けたいと考えています。このWebアプリケーションから画像を保存するのに最も適切な方法はどれですか。", options: ["Elastic IPを利用してWebサーバーのIPアドレスを固定化する", "画像を一時的に格納するS3バケットを複数用意する。S3バケットに画像がアップロードされたら、Lambda関数で画像格納用のS3バケットにファイルを移動させる", "ELBのClassic Load Balancerを利用してAuto Scaling グループにアップロードすることで、S3バケットに書き込みができるように設定する", "画像処理用のリソースを提供するために、スポットインスタンスを使用してWebサーバーの機能を拡張する", "署名付きURLを使用してS3に直接アップロードする"], correct: "e", explanation: "正解: E<br>Amazon S3の署名付きURLとは、S3上のデータに対して一定時間だけアクセスを許可するためのURLを発行する機能です。この機能を利用することで、Webサーバーを経由せずに直接S3にファイルを格納することができます。したがって、Eが正解です。" },
            { q: "22. ある企業には、Webサーバーをパブリックサブネットに、データベースサーバーをプライベートサブネットに構築している2層のWebサイトシステムがあります。このシステムでは、インターネットからアクセスできるのはWebサーバーだけですが、データベースサーバーはソフトウェア更新のためにインターネットにアクセスする必要があります。このシステムの要件を満たすサービスの利用方法は次のうちどれですか。", options: ["パブリックサブネットにNATゲートウェイを構築する", "プレイスメントグループを設定する", "データベースサーバーにElastic IPを割り当てる", "プライベートサブネットのネットワークACLで、インターネットからの通信トラフィックを「許可」に設定する"], correct: "a", explanation: "正解: A<br>NATゲートウェイには、プライベートサブネットからインターネットへ接続するためのNAT (ネットワークアドレス変換) 機能があります。この機能を使うことにより、設問のケースに対応できます。したがって、Aが正解です。<br>B. プレイスメントグループは、単一のアベイラビリティーゾーン (AZ) 内のAmazon EC2インスタンスを論理的にグルーピングしたものです。同じAZ内に配置されたEC2 インスタンスをグループ化できるため、異なるAZ間や異なるリージョン間の通信よりも高速な処理が可能となりますが、設問のシステム要件は満たしません。<br>C. Elastic IPは、固定のグローバルIPアドレスを提供するサービスです。固定のパブリックIPを割り当てるだけではインターネットへ接続できません。<br>D. ネットワークACLでインターネットからの通信トラフィックを許可するのはインバウンドのルールであるため、データベースサーバーから外部のインターネットへ接続するための要件ではありません。" },
            { q: "23. Amazon EC2 インスタンス上で、毎日7時間だけ稼働が要求されるWebアプリケーションを設計しています。このEC2インスタンスは、r4.8xlargeのインスタンスタイプを使用すると安定して動作します。このシステムは高可用性が求められておらず、1年後に廃止されます。このシステムを動作させるEC2の購入オプションとして、最もコスト効果の高いインスタンスは次のうちどれですか。", options: ["Standardタイプのリザーブドインスタンス", "Convertibleタイプのリザーブドインスタンス", "スケジュールされたリザーブドインスタンス", "スポットインスタンス"], correct: "c", explanation: "正解: C<br>設問のケースでは、毎日7時間だけ稼働すればよいため、StandardタイプのリザーブドインスタンスとConvertibleタイプのリザーブドインスタンスは適切ではありません。また、高可用性は求められていないものの7時間は稼働を要求されているため、スポットインスタンスも適切ではありません。スケジュールされたリザーブドインスタンスは、予約した時間枠内で起動できる購入オプションで、インスタンスがスケジュールされた時間に対して課金されます。非営業日に実行するバッチ処理など、継続的に行う必要がなく、定期的な処理を行う際に適しています。したがって、毎日7時間だけ稼働する設問のシステムではCが適切な購入オプションといえます。" },
            { q: "24. あなたの会社では、リレーショナルデータベースを実行しているオンプレミスサーバーがあります。現在のデータベースは、さまざまな場所にいるユーザーから高い読み取りトラフィックが発生しています。あなたは、データベースサーバーを最小限の変更でAWSに移行したいと考えています。データベースに障害が発生しても業務を継続でき、現在のトラフィックでも影響が出ないようにする必要があります。これらの要件を満たすソリューションはどれですか。", options: ["異なるアベイラビリティーゾーン (AZ) のApplication Load Balancerに登録されたEC2インスタンスでホストされているデータベースを構築する", "異なるリージョンに複数のEC2 インスタンスでホストされているデータベースを構築する", "Amazon RDSを使用し、マルチAZ配置および1つ以上のリードレプリカで構成する", "Amazon RDSを使用し、マルチAZ配置および1つ以上のスタンバイデータベースで構成する"], correct: "c", explanation: "正解: C<br>異なるアベイラビリティーゾーン (AZ) やリージョンにデータベースを配置することで業務継続性は向上しますが、Amazon EC2 インスタンスでデータベースを冗長化構成する場合はクラスタリングの仕組みを導入しなければならず、構成を大きく見直す必要があると考えられます。また、RDSではスタンバイデータベースを構成する機能がありません。設問のケースでは、Amazon RDSのマルチAZによる耐障害性の向上、およびリードレプリカによる読み取りスループットの向上が見込めます。このため、Cが正解です。" },
            { q: "25. ある会社では、バッチ処理を行うシステムを2つに区分けしています。1つはミッションクリティカルな基幹システムで実行するバッチ処理で、もう1つは業務に直接影響のない非基幹システムで実行するバッチ処理です。これらのバッチ処理は、不定期に実行されます。このシステムをできるだけ低コストで構築するための方法として、適切な構成は次のうちどれですか。", options: ["基幹システムをリザーブドインスタンス、非基幹システムをオンデマンドインスタンスで構成する", "基幹システムをリザーブドインスタンス、非基幹システムをスポットインスタンスで構成する", "基幹システム、非基幹システムともに、オンデマンドインスタンスで構成する", "基幹システムをスポットインスタンス、非基幹システムをリザーブドインスタンスで構成する"], correct: "b", explanation: "正解: B<br>基幹システムで実行するバッチ処理は、インスタンスを常時起動する必要があるため、リザーブドインスタンスが適切です。一方、非基幹システムで実行するバッチ処理は、処理が中断したとしても業務に直接影響しないため、最もコストが低いスポットインスタンスが適切です。したがって、Bが正解です。" },
            { q: "26. あなたの会社では、システムの更改に伴い、20TBのデータを30日以内にデータセンターからAWSクラウドに移行する必要があります。ネットワーク帯域幅は15Mbpsに制限されており、使用率が70%を超えることはできません。これらの要件を満たすためには、次のうちどのサービスを利用すべきですか。", options: ["AWS Snowballを利用し、データを移行する", "AWS DataSyncを利用し、データを移行する", "AWS Storage Gatewayのファイルゲートウェイを利用し、データを移行する", "Amazon S3 Transfer Accelerationを利用し、Amazon S3ヘデータを移行する"], correct: "a", explanation: "正解: A<br>AWS Snowballでは、AWSから配送されたSnowball筐体に移行データを保存し、筐体をAWSへ返送すると、AWSがデータを移行してくれます。設問のようにネットワーク帯域が制限される場合は、大量のデータを移行するのに最適です。したがって、Aが正解です。<br>B. AWS DataSyncはネットワーク経由でデータを転送するため、制限されたネットワーク帯域で期限内にデータを移行することは困難と考えられます。<br>C. AWS Storage Gatewayでは、サーバーとAmazon S3がローカルで接続されているように見えますが、実際にはネットワークを経由してデータ転送を行っています。そのため、ネットワーク帯域が制限されている中、期限内にデータ転送することは困難と考えられます。<br>D. Amazon S3 Transfer Accelerationは、エッジロケーションを利用してS3へのデータ転送を最適化するサービスです。データ転送には、インターネットを経由する必要があり、ネットワーク帯域が制限されている中、期限内にデータを移行することは困難と考えられます。" },
            { q: "27. Amazon API Gateway上に構築されたAPIレイヤーを保護する一環として、既存のIDプロバイダーによって認証されているユーザーを承認する必要があります。ユーザーが認証に3回失敗した場合、アクセスを1時間、拒否されるようにしなければなりません。これらの要件を満たす方法として適切なものはどれですか。", options: ["IAMの認証を使用して、IAMロールに最小のアクセス許可を追加する", "Amazon API Gatewayカスタム認証を使用してLambda関数を呼び出し、各ユーザーのIDを検証する", "Cognitoユーザープールを使用し、組み込みのユーザー管理を提供する", "Cognitoユーザープールを使用し、外部IDプロバイダーと統合する"], correct: "b", explanation: "正解: B<br>Amazon API Gatewayカスタム認証は、そのなかでLambdaと連携できるため、条件に応じてアクセスを許可あるいは拒否するプログラムを実行できます。したがって、Bが正解です。<br>A. IAMロールはホワイトリスト形式で権限を付与できますが、IAMのサービスだけで問題の要件に合致する仕組みを実装することはできません。<br>C. D. Cognitoユーザープールを利用した認証では、ユーザーアカウントをロックする機能はありますが、問題の要件に合致する仕組みを実装することはできません。" },
            { q: "28. あなたは、「B to C」 向けのサービス提供を検討している企業からシステム構築の相談を受けました。このサービスは常にサイトへのアクセスがあるわけではなく、1日のうち夕方から夜にかけてのみ利用者が急増することが予想されています。あなたは、この一時的な高負荷に対応するためにAmazon EC2のAuto Scaling グループを使用することにしました。さらに、サービス内容について調査を進めていると、サービス利用者のデータ蓄積には非リレーショナルデータベース (RDB) が適しており、また、負荷の増減に自動で対応できる仕組みが望まれていることもわかりました。この企業に提案するソリューションとして、最も適切な項目はどれですか。", options: ["トラフィック分散にはAmazon Route 53を使用し、データ蓄積にはAmazon Auroraを使用する", "トラフィック分散にはAmazon Route 53を使用し、データ蓄積にはAmazon DynamoDBを使用する", "トラフィック分散にはNetwork Load Balancerを使用し、データ蓄積にはAmazon Auroraを使用する", "トラフィック分散にはNetwork Load Balancerを使用し、データ蓄積にはAmazon DynamoDBを使用する"], correct: "d", explanation: "正解: D<br>設問のケースでは、非リレーショナルデータベース (RDB) によるデータ蓄積、負荷の増減に自動で対応できることが求められています。データ蓄積に関しては、マネージド型NoSQLデータベースサービス 「Amazon DynamoDB」が適しています。負荷分散に関しては、低レイテンシーで高いスループットを実現するロードバランシングサービス 「Network Load Balancer」が適しています。したがって、Dが正解です。<br>A. C. Amazon AuroraはRDBサービスであるため、非RDBが求められる設問のケースでは適していません。<br>B. Amazon Route 53では、DNSフェールオーバー機能で障害発生時にサーバーの切り替えができますが、設問のケースには適していません。" },
            { q: "29. 情報システム部門でデータベース管理者をしているあなたのもとに、AWSクラウドへのデータ移行の要望がありました。調査したところ、ボリュームあたりのIOPSは50000 IOPSが必要になることがわかりました。データ格納先をAmazon EBSにする場合のソリューションとして、適切な方法は次のうちどれですか。", options: ["ボリュームタイプにスループット最適化HDD (st1) を選択する", "ボリュームタイプに汎用SSD (gp2) を選択する", "ボリュームタイプにプロビジョンドIOPS SSD (io1) を選択し、このEBSと接続するNitro SystemのEC2 インスタンスを作成する", "ボリュームタイプにプロビジョンドIOPS SSD (io1) を選択し、このEBSと接続するNitro System以外のEC2 インスタンスを作成する"], correct: "c", explanation: "正解: C<br>Amazon EBSは、ボリュームタイプによってパフォーマンス特性が異なります。設問のように、IOPSが50000を超えるボリュームタイプは、プロビジョンドIOPS SSDのiolまたはio2だけになります。ただし、Nitro Systemを選択した場合のみ、最大64000 IOPSになります。プロビジョンドIOPS SSDを選択しても、Nitro System 以外の場合は最大32000 IOPSです。したがって、Cが正解です。" },
            { q: "30. 大量のストリーミングデータを分析するために、Amazon S3やAmazon Redshiftに格納するのに適しているサービスは次のうちどれですか。", options: ["Amazon Kinesis Data Streams", "Amazon Kinesis Data Firehose", "Amazon Kinesis Data Analytics", "Amazon SQS", "Amazon SNS"], correct: "b", explanation: "正解: B<br>Amazon Kinesisは、リアルタイムに流れてくる大量のデータを処理するサービスです。Amazon Kinesis Data Firehoseは、独自にアプリケーションを構築することなく、ストリームデータをAmazon S3やAmazon Redshift、Amazon OpenSearch Service (旧Elasticsearch Service) といったAmazonの各サービスに、簡単に配信・保存できるサービスです。したがって、Bが正解です。<br>A. Amazon Kinesis Data Streamsは、ストリーミングデータをほぼリアルタイムで保存することができ、登録されたデータはAmazon EMRやAWS Lambdaなどのサービス上に構築された独自アプリケーションで処理することが可能です。<br>C. Amazon Kinesis Data Analyticsは、ストリーミングデータに対してSQLクエリを実行し、リアルタイム分析を行うサービスです。<br>D. Amazon SQSは、メッセージキュー (MQ) のマネージドサービスです。<br>E. Amazon SNSは、AWSで提供されるメッセージ通知サービスです。" },
            { q: "31. あなたの会社には、バックエンドでAPIサービスへのリクエストを行うWebアプリケーションがあります。APIサービスは、ELBに登録されたAmazon EC2 インスタンスで実行されます。ほとんどのAPIサービスの呼び出しはごく短時間で終了しますが、外部サービスでオブジェクトを作成するエンドポイントの呼び出しには時間がかかっています。これにより、クライアントサイドではタイムアウトが起こり、システム全体のレイテンシーが増加しています。低速なエンドポイントの影響を最小限に抑えるために行うべき対応は、次のうちどれですか。", options: ["EC2インスタンスのサイズを変更し、メモリ容量を増やす", "Amazon SQSを使用し、別々のワーカーによる非同期処理で長時間実行されるリクエストをオフロードする", "ELBのアイドルタイムアウト時間を増やし、長時間実行されるリクエストを完了できるようにする", "Amazon ElastiCache (Redis) を使用し、外部サービスからの応答をキャッシュする"], correct: "b", explanation: "正解: B<br>この設問の選択肢は複数正解に見えますが、問題文の「低速なエンドポイントの影響を最小限に抑える」という点に注目すると、最も適切なのはBです。長時間かかる処理をAmazon SQSを使って非同期化することで、クライアントはすぐにレスポンスを受け取ることができ、システム全体のレイテンシー増加を防げます。DのElastiCacheも有効な場合がありますが、それは外部サービスの応答がキャッシュ可能な場合に限られます。設問はオブジェクトの『作成』であり、キャッシュが有効ではないケースが考えられます。したがって、より汎用的な解決策であるBが最適です。（補足：元のPDFでは正解がDとなっていましたが、設問の文脈上Bがより適切と考えられるため修正しました）" },
            { q: "32. 最近、あなたの会社ではグローバルユーザー向けにコンテンツを提供するためのWebサイトを立ち上げました。このWebサイトで、Amazon EC2 インスタンスをオリジンとして接続したAmazon CloudFrontを利用して、静的コンテンツをユーザーへ高速に配信したいと考えています。アプリケーションの高可用性を実現するソリューションとして、適切な方法は次のうちどれですか。", options: ["Amazon CloudFrontにLambda@Edgeを使用する", "Amazon CloudFrontにAmazon S3 Transfer Accelerationを有効化する", "オリジンの一部として、別のアベイラビリティーゾーン (AZ)に別のEC2インスタンスを設定する", "同じAZのオリジンサーバークラスターの一部として、別のEC2インスタンスを設定する"], correct: "c", explanation: "正解: C<br>オリジングループに対して、Amazon EC2インスタンスがオリジンとなっているものを複数設定することで、オリジングループ内でフェイルオーバーの設定を行うことができます。したがって、Cが正解です。<br>A. Lambda@Edgeはエッジロケーションからコードを実行するサービスですが、EC2インスタンスをオリジンとした静的コンテンツ配信の高可用性には寄与しません。<br>B. Amazon CloudFrontでは、Amazon S3の機能であるTransfer Accelerationを利用することはできません。<br>D. 同じアベイラビリティーゾーン (AZ) にEC2 インスタンスを配置しても、AZ障害が発生した場合はオリジンであるEC2インスタンスヘアクセスできないため、高可用性を実現する構成とはいえません。" },
            { q: "33. アメリカ、ヨーロッパ、日本での利用を想定した大規模なグローバルアプリケーションの構築が進められており、ソリューションアーキテクトであるあなたは、データベースについて相談されました。会社からの要望は以下のとおりです。・それぞれの国でアプリケーションを利用しても高速で処理できるように、データベースが複数地域に分散していること・各地域でデータの書き込みをした場合に、その変更がその他地域の分散したテーブルに反映されること。また、その変更は概ね1秒以内に反映されること・各地域でテーブルの同じ項目を同時に更新し競合が発生した場合には、最終更新者の内容を反映すること。これらの要望を満たすことができるソシューションは、次のうちどれですか。", options: ["データベースにAmazon ElastiCacheを選択し、データストアにRedisを選択する", "データベースにAmazon Redshiftを選択し、コンピュータノード数が3つ以上となるようにクラスターを構築する", "データベースにAmazon Auroraを選択し、リードレプリカを使用する", "データベースにAmazon DynamoDBを選択し、グローバルテーブルを使用する"], correct: "d", explanation: "正解: D<br>Amazon DynamoDB グローバルテーブルは、複数リージョンに配置しているデータベーステーブルでデータの整合性をとるフルマネージド型のソリューションです。DynamoDB グローバルテーブルでは、リードレプリカのように1つがプライマリーテーブルで、そのデータをほかのレプリカテーブルに同期しているわけではありません。すべてのテーブルがプライマリーテーブルのため、どのリージョンのテーブルに対してデータ変更をしても、他リージョンのテーブルに対して同期が行われます。通常、データの新規書き込みや更新処理は1秒以内に行われ、その他の分散されたテーブルに反映されます。ほぼ同時に更新処理が発生し競合が発生することもありますが、その場合は最後に更新された内容が反映されます。したがって、Dが正解です。<br>A、B、Cともに設問の要望を満たす機能はありません。" },
            { q: "34. ある会社では、企業のアプリケーションを単ーリージョンのAmazon EC2 インスタンス上で実行しています。ソリューションアーキテクトは、広域災害に備えてアプリケーションを別のリージョンでもデプロイできるようにする必要があると考えています。これを実現するためには、以下のどの方法を組み合わせる必要がありますか(2つ選択)。", options: ["EC2 インスタンスのEBSボリュームをデタッチし、デタッチされたEBSボリュームをAmazon S3にコピーする", "別のリージョンのAmazon Machine Imageから新しいEC2インスタンスを起動する", "別のリージョンでEC2 インスタンスを新たに起動し、Amazon S3に保管されているEBSにボリュームをコピーする", "EC2 インスタンスのAmazon Machine Imageをコピーし、別のリージョンをコピー先に指定する", "Amazon S3からEBSボリュームをコピーし、そのEBSボリュームを使用してコピー先のリージョンでEC2インスタンスを起動する"], correct: ["b", "d"], explanation: "正解: B, D<br>本設問を解くうえで、「Amazon S3にEBSボリュームそのものを保管することはできない」という点を押さえておく必要があります。EBSボリュームのデータをS3に保管するためには、EBSスナップショットを用います。広域災害への対応として、Amazon EC2 インスタンス上のアプリケーションを別リージョンで起動するためには、アプリケーション情報が保存されたAmazon Machine Image (AMI)が必要です。また、情報を保存したAMIを別リージョンヘコピーするためには、AMIをコピーする際に宛先リージョンを指定する必要があります。したがって、BとDが正解です。<br>A.、C. 前述のとおり、EBSボリュームはスナップショットとしてS3へ保管することはできますが、EBSボリューム自体をS3にコピーすることはできません。<br>E. EBSスナップショットをリージョン間でコピーすることは可能ですが、S3を介してEBSボリューム自体をコピーすることはできません。" },
            { q: "35. あるゲーム会社は、単一のアベイラビリティーゾーン (AZ) に複数のAmazon EC2 インスタンスを構築し、レイヤー4でユーザーと通信するマルチプレーヤーゲームを運営しています。このゲーム会社は、アーキテクチャの可用性と費用対効果を向上したいと考えています。ソリューションアーキテクトであるあなたは、この要件を満たすためにどのような設計変更を推奨する必要がありますか(2つ選択)。", options: ["EC2 インスタンスの数を増やす", "EC2インスタンスの数を減らす", "EC2インスタンスの前にNetwork Load Balancerを構成する", "EC2インスタンスの前にApplication Load Balancerを構成する", "Auto Scalingグループを設定して、複数のAZのEC2 インスタンスを自動的に追加または削除する"], correct: ["c", "e"], explanation: "正解: C, E<br>レイヤー4で通信を行うシステムであるため、Network Load Balancerを構成することで現在構築されている複数のEC2 インスタンスの可用性を向上させることが見込めます。また、複数のアベイラビリティーゾーン (AZ) にEC2インスタンスを展開することで可用性の向上が見込め、かつAuto Scalingで費用対効果を高めることができます。したがって、CとEが正解です。<br>A. このシステムはすでに複数のEC2インスタンスで構成されており、単にEC2インスタンスを増やすだけでは可用性を向上させることはできないと考えられます。<br>B. EC2インスタンスを減らすことで費用は下がるかもしれませんが、可用性も低下する可能性があります。<br>D. Application Load Balancerは、レイヤー7で通信を行うロードバランサーであるため、設問のシステムには適切ではないと考えられます。" },
            { q: "36. あるWebアプリケーションは、パブリックサブネットにELBのClassic Load Balancerが配置されており、その配下にコンテンツベースの振り分けが可能なリバースプロキシサーバーが配置されています。アプリケーションを動作させるWebサーバーは、プライベートサブネットに配置されています。あるとき、このリバースプロキシへのトラフィックが増大していることがわかり、あなたは改善策を求められています。スケーラブルでかつ費用対効果が高い方法は次のうちどれですか(2つ選択)。", options: ["リバースプロキシをClassic Load Balancerに置き換える", "WebサーバーにAuto Scalingを追加する", "リバースプロキシにAuto Scalingを追加する", "Webサーバーをバースト可能 (突発的なアクセス増加に対応可能)なt2のインスタンスタイプに変更する", "Classic Load BalancerをApplication Load Balancerに変更する"], correct: ["c", "e"], explanation: "正解: C, E<br>この設問のポイントは「コンテンツベースの振り分け」と「リバースプロキシへのトラフィック増大」です。リバースプロキシがボトルネックになっているため、リバースプロキシ自体をスケーラブルにする必要があります（C）。また、Application Load Balancerはコンテンツベースのルーティング機能を内蔵しているため、リバースプロキシサーバー群をApplication Load Balancerに置き換えることで、構成を簡素化し、スケーラビリティと費用対効果を高めることができます（E）。WebサーバーのAuto Scaling（B）はWebサーバー層のスケーラビリティには貢献しますが、リバースプロキシのボトルネックは解決しません。（補足：元のPDFでは正解がB, Cでしたが、設問の状況を考えるとC, Eの組み合わせがより直接的な解決策です）" },
            { q: "37. ある企業は3階層のWebアプリケーションで構成されたキャンペーンサイトを開設しています。キャンペーンサイトはAmazon EC2で配信し、データベースはAmazon RDS (Aurora)を利用しています。週末にトラフィックの急増が予想されていますが、RDSが過負荷にならず、コストを最小限に抑える設計はどれですか。", options: ["EC2でAuto Scaling グループを設定する", "Amazon DynamoDB Accelerator (DAX)を設定し、データベース読み込み時のキャッシュを行う", "Amazon DynamoDBを設定し、トラフィックの急増に対応する", "RDSデータベースインスタンスでAuto Scalingを設定する", "あらかじめ複数のRDSデータベースインスタンスを構成する"], correct: "d", explanation: "正解: D<br>Amazon AuroraのAuto Scalingによって、リソースの使用状況をモニタリングし、その使用状況に応じてRDSデータベースインスタンス（リードレプリカ）を自動で増減できます。これにより、トラフィックの急増に対応しつつ、不要な時はインスタンスを減らしてコストを抑えることができます。したがって、Dが正解です。<br>A. Amazon EC2でもAuto Scalingが可能ですが、RDSの負荷軽減にはなりません。<br>B. C. Amazon DynamoDBやDAXはNoSQL向けのサービスであり、リレーショナルデータベースであるAuroraには適用できません。<br>E. あらかじめ複数のRDSインスタンスを作成しておくことは、コスト的にメリットがありません。" },
            { q: "38. あなたの会社では、Windowsの共有ファイルストレージを必要とする大規模なMicrosoft SharePointをオンプレミスで運用しています。あなたはこのワークロードをAWSへ移行したいと考えており、さまざまなストレージを検討しています。ストレージは、可用性が高くアクセス制御のためにActive Directoryと統合する必要があります。これらの要件を満たす方法として適切な対応はどれですか。", options: ["Amazon EFSストレージを利用し、認証用のActive Directory ドメインを設定する", "2つのアベイラビリティーゾーン (AZ) にSMBファイル共有が可能なAWS Storage Gatewayのファイルゲートウェイを作成する", "Amazon S3バケットを作成し、Windows Serverのボリュームとしてマウントする", "AWS上にファイルサーバーとしてAmazon FSx for Windowsを作成し、認証用にActive Directory ドメインを設定する"], correct: "d", explanation: "正解: D<br>Amazon FSx for Windowsは、信頼性が高くスケーラブルな完全マネージド型のファイルストレージで、オンプレミスのActive DirectoryやAWS Managed Microsoft AD と統合してアクセス制御を行うことができます(D)。<br>A. Amazon EFSは、NFSでアクセスを行うため、Windowsの共有ファイルストレージとして利用することはできません。<br>B. AWS Storage Gatewayサービスの機能だけで、2つのアベイラビリティーゾーン(AZ) にインスタンスを構成することはできません。<br>C. Amazon S3は、Windowsサーバーにマウントする機能を標準で備えていません。" },
            { q: "39. ソリューションアーキテクトであるあなたは、組織内に新しいAWSアカウントを作成しようとしています。作成直後に、AWSアカウントのルートユーザーに対して、アカウント乗っ取りなどによる脅威からセキュリティを保護するため、いくつかの対策を予定しています。適切な対策は次のうちどれですか(2つ選択)。", options: ["ルートユーザーに多要素認証 (MFA) を有効化する", "ルートユーザーのアクセスキーIDとシークレットアクセスキーを暗号化し、ローカルに保管する", "ルートユーザーのパスワードを複雑なものに変更する", "ルートユーザーに対してIP制限をかける", "ルートユーザーから管理者権限を取り除く"], correct: ["a", "c"], explanation: "正解: A, C<br>AWSアカウント作成直後に、すべての管理者権限を持つルートアカウントを保護するため、セキュリティ対策を行います。通常はパスワードを複雑なものに変更したり、あるいはログイン時の多要素認証(MFA:Multi-Factor Authentication) を有効化することで、なりすましなどによるアカウント乗っ取りのリスクを低減します。したがって、A、Cが正解です。" },
            { q: "40. ある会社では、オンプレミス環境でWebアプリケーションを実行しています。Webアプリケーションはコンテナ化されており、ユーザーレコードを含むPostgreSQL データベースに接続された複数台のLinuxホストで実行されています。同社では、インフラストラクチャのメンテナンスにかかる運用コストと将来的なキャパシティの計画が、自社の成長を阻害していることがわかりました。この問題を解決するために、ソリューションアーキテクトが実施すべき対策は次のうちどれですか。", options: ["PostgreSQLデータベースをAmazon Auroraに移行する", "WebアプリケーションをEC2インスタンスでホストする", "WebアプリケーションのコンテンツをAmazon CloudFrontを利用して配信する", "WebアプリケーションとPostgreSQL データベースの間にAmazon ElastiCacheを配置する"], correct: "a", explanation: "正解: A<br>設問の課題は「インフラのメンテナンスにかかる運用コスト」と「キャパシティ計画」です。オンプレミスのPostgreSQLをマネージドサービスであるAmazon Aurora (PostgreSQL互換) に移行することで、OSのパッチ適用、バックアップ、スケーリングなどの運用タスクをAWSにオフロードでき、運用コストとキャパシティ計画の負担を大幅に削減できます。したがって、Aが正解です。（補足：元のPDFでは正解がCでしたが、課題の核心はデータベースの運用負荷であり、Aの対策が最も直接的です。Cはパフォーマンス向上策であり、運用負荷削減とは観点が異なります）" },
            { q: "41. ソリューションアーキテクトであるあなたは、企業が所有する秘匿情報を含んだ業務データの保存先として、Amazon S3の導入を検討しています。セキュリティ要件は厳しく、保存するデータの暗号化や、暗号化鍵の自動的なローテーション、暗号化鍵の使用状況の可視化・証跡管理や暗号化鍵の権限管理などが求められています。S3でこれらの要件を実現する方法として、適切な対応は次のうちどれですか。", options: ["AWS KMSサービスで暗号化鍵を管理し、サーバーサイド暗号化 (SSE-KMS)を使用するようS3バケットを作成する", "Amazon S3が管理する暗号化鍵により、サーバーサイド暗号化(SSE-S3)を使用するようS3バケットを作成する。また、S3バケット内のファイルのバージョニング機能を有効化しておく", "Amazon S3が管理する暗号化鍵により、サーバーサイド暗号化 (SSE-S3)を使用するようS3バケットを作成する", "会社が発行・管理している暗号化鍵により、サーバーサイド暗号化(SSE-C)を使用するようS3バケットを作成する"], correct: "a", explanation: "正解: A<br>設問では、暗号化鍵の自動ローテーションや暗号化鍵の使用状況の可視化・証跡管理、鍵の権限管理が要件になっています。AWS KMSを利用した暗号化 (SSE-KMS) でこれらの機能を実現できるため、Aが正解です。<br>B.、C. S3が管理するデフォルトキー (SSE-S3) では、自動ローテーションなどはAWS側で自動的に実施しますが、キーの証跡管理や権限管理はできません。<br>D. ユーザーの任意の暗号化鍵 (SSE-C) を使用する場合は、ユーザー自身でローテーションなどの管理を行う必要があります。" },
            { q: "42. ある会社のWebアプリケーションは複数のLinuxインスタンスを使用しており、Amazon EBSボリュームにデータを保存しています。同社では、障害が発生した場合にアプリケーションの回復力を高め、「原子性、一貫性、独立性、耐久性(ACID)」に準拠したストレージを提供するソリューションを探しています。これらの要件を満たすための方法として、次のうちどのソリューションが最も適切ですか。", options: ["各アベイラビリティーゾーン (AZ) のEC2 インスタンスでアプリケーションを起動し、EBSボリュームを各EC2インスタンスに接続する", "複数のAZにAuto Scaling グループを構成して、Application Load Balancerを作成する。各EC2 インスタンスでインスタンスストアをマウントする", "複数のAZにAuto Scaling グループを構成して、Application Load Balancerを作成する。Amazon EFSにデータを格納し、各EC2インスタンスにターゲットをマウントする", "複数のAZにAuto Scaling グループを構成して、Application Load Balancerを作成する。Amazon S3の1ゾーン低頻度アクセス (One Zone-Infrequent Access) を使用してデータを保存する"], correct: "c", explanation: "正解: C<br>EFSは高可用の共有ストレージサービスで、複数のAZにまたがる複数のEC2インスタンスから同時に利用できます。また、強力なファイルシステムの一貫性モデルを提供しているため、ACID準拠に近い要件を満たすのに適しています。したがって、Cが正解です。<br>A. Amazon EBSは単一のAZに属し、複数のEC2インスタンスから同時にアタッチすることはできません（一部例外を除く）。回復力を高めるには複雑なレプリケーション設定が必要です。<br>B. インスタンスストアは揮発性のディスクで、EC2インスタンス停止時にデータが消失するため不適切です。<br>D. Amazon S3は結果整合性モデルを採用しており、ファイルシステムとしてのACID準拠はできません。" },
            { q: "43. ある会社では、基幹業務システムをus-east-1とus-east-2で構築しています。同社では、通常時は基幹業務システムをus-east-1で動作させ、us-east-1の障害発生時以外はus-west-2を動作させたくないと考えています。このとき、切り替えを自動で行うことができる適切なルーティングポリシーの設定は、次のうちどれですか。", options: ["us-east-1とus-east-2で、加重ルーティングを100:0で設定する", "us-east-1とus-east-2で、加重ルーティングを50:50で設定する", "us-east-1をプライマリ、us-east-2をセカンダリとするフェイルオーバールーティングを設定する", "us-east-2をプライマリ、us-east-1をセカンダリとするフェイルオーバールーティングを設定する"], correct: "c", explanation: "正解: C<br>フェイルオーバールーティングを設定することで、通常時はプライマリのus-east-1で動作し、障害発生時には自動でセカンダリのus-east-2へ切り替えを行います。したがって、Cが正解です。<br>A. 加重ルーティングを100:0に設定することで、通常時はus-east-1のみに動作を絞ることが可能ですが、障害発生時の切り替えは手動でルーティングポリシーを変更する必要があります。<br>B. 加重ルーティングを50:50に設定することで、us-east-1とus-east-2どちらも均等に動作することになります。<br>D. この設定でフェイルオーバールーティングを設定すると、通常時はプライマリであるus-east-2で動作することになります" },
            { q: "44. ソリューションアーキテクトであるあなたは、モバイル端末のアプリケーションから社内の業務システムにアクセスできるようにAWSのアーキテクチャを設計しています。要件として、モバイル端末のアプリケーションからAmazon S3への業務データのアップロードがあります。しかし、モバイル端末のアプリケーションが、AWS上に構築しているWebアプリケーションサーバーを中継してデータをアップロードすると、大量のトラフィックが発生することが懸念されています。モバイル端末のアプリケーションからS3にデータをアップロードする方法として、コスト面で最も効率的かつ適切な対応は次のうちどれですか。", options: ["Amazon S3のクロスリージョンレプリケーション機能を利用する", "Amazon S3上の一時的な別のバケットにデータをアップロードし、完了後にAWS Lambdaの機能で適切なS3バケットにコピーする", "大量のトラフィックを処理できるよう、Webサーバーのインスタンスサイズを増やす", "Amazon S3の署名付きURLを発行し、モバイル端末のアプリケーションからデータを直接アップロードする"], correct: "d", explanation: "正解: D<br>署名付きURLとは、S3に対して一定時間だけアクセスを許可するためのURLを発行する機能です。これにより、モバイル端末からWebサーバーを経由せず直接S3にデータをアップロードできるため、Webサーバーのトラフィックと負荷を削減でき、コスト効率が最も高くなります。したがって、Dが正解です。<br>A. クロスリージョンレプリケーションは耐障害性のための機能であり、アップロードのトラフィック問題は解決しません。<br>B. この方法でもWebサーバーの中継は避けられないため、問題の解決にはなりません。<br>C. Webサーバーのインスタンスサイズを増やすことは、コスト増加に直結するため効率的ではありません。" },
            { q: "45. あなたの会社にはAmazon EC2 インスタンスで動作するアプリケーションがあり、IAMロールをアタッチしてAmazon DynamoDBへのアクセス制御を設定しようとしています。アクセスするDynamoDBのテーブル名はusersで、EC2からusersテーブル内のレコード削除のみを許可したいと考えています。最小権限の法則に従ったIAMポリシーは次のうちどれですか。", options: ['{"Version":"2012-10-17","Statement":[{"Effect": "Allow","Action": "dynamodb: DeleteItem","Resource": "arn:aws: dynamodb:ap-northeast-1:xxxxxxxxxxxx:table/*"}]}', '{"Version": "2012-10-17","Statement":[{"Effect": "Allow","Action": "dynamodb: DeleteItem","Resource": "arn:aws: dynamodb:ap-northeast-1:xxxxxxxxxxxx:table/users"}]}', '{"Version":"2012-10-17","Statement":[{"Effect": "Allow","Action": "dynamodb:*","Resource": "arn:aws: dynamodb:ap-northeast-1:xxxxxxxxxxxx:table/*"}]}', '{"Version": "2012-10-17","Statement":[{"Effect": "Allow","Action": "dynamodb:*","Resource": "arn:aws: dynamodb:ap-northeast-1:xxxxxxxxxxxx:table/users"}]}'], correct: "b", explanation: "正解: B<br>最小権限の法則に従い、必要なアクション（dynamodb:DeleteItem）を、必要なリソース（usersテーブル）にのみ許可する必要があります。DynamoDBテーブルのレコードのみ削除のActionを許可し、かつ対象のリソースとしてDynamoDBのusersテーブルのみを指定しているBが正解です。<br>Aは、対象のテーブルが「*」となっており、範囲が広すぎます。<br>Dは、DynamoDBのすべてのActionを許可しているため、最小権限の法則に反します。<br>Cは、AとDの両方の問題を併せ持っています。" },
            { q: "46. あなたの会社では、社内に100TBの業務データを保存しているファイルサーバーを運用しています。バックアップ先としてAmazon S3 Glacierへのデータ移行を検討しています。社内のネットワーク回線への負担を軽減しつつ、コスト効果の高い移行方法として適切な対応は、次のうちどれですか。", options: ["S3ヘインターネット経由でブラウザからファイルアップロードを行う。S3上に移行されたデータをGlacierにアーカイブするライフサイクルポリシーを設定する", "会社とAWSのVPC間にサイト間VPNを設定し、VPN経由でブラウザからGlacierにファイルをアップロードする", "会社とAWSのVPC間にサイト間VPNを設定し、VPN経由でブラウザからS3にファイルをアップロードする。S3上に移行されたデータをGlacierにアーカイブするライフサイクルポリシーを設定する", "AWS Snowballを使用し、S3バケットを移行先として設定する。S3 上に移行されたデータをGlacierにアーカイブするライフサイクルポリシーを設定する"], correct: "d", explanation: "正解: D<br>回線の逼迫を防ぎつつ100TBという大量のデータを移行するには、物理デバイスを使用するAWS Snowballが最適です。SnowballでデータをAmazon S3に移行した後、S3のライフサイクルポリシーを使って自動的にS3 Glacierにアーカイブするのが最もコスト効率の高い方法です。したがって、Dが正解です。<br>設問では、会社の回線への負担を軽減するという要件がありますので、100TBのデータをインターネット経由やVPN経由で転送する方式(A, B, C)は不適切です。" },
            { q: "47. ある企業では、古いニュース映像のビデオアーカイブをAWSに保存できるソリューションを探しています。映像データを復元する必要はほとんどありませんが、データが必要となった場合は最長でも5分以内で使用できることが求められ、コストは最小限に抑える必要があります。最も費用対効果の高いソリューションは次のうちどれですか。", options: ["ビデオアーカイブをAmazon S3 Glacierに保存し、Expeditedオプションを使用する", "ビデオアーカイブをAmazon S3 Glacierに保存し、Standardオプションを使用する", "ビデオアーカイブをAmazon S3の標準低頻度アクセス (Standard - Infrequent Access) で保存する", "ビデオアーカイブをAmazon S3の1ゾーン低頻度アクセス (One Zone - Infrequent Access) で保存する"], correct: "a", explanation: "正解: A<br>Amazon S3 Glacierは低コストのアーカイブストレージです。その中でもExpedited（迅速）取り出しオプションは、通常1～5分でデータを取り出すことができ、設問の要件に合致します。したがって、Aが正解です。<br>B. Standardオプションでは、データの取り出しに3～5時間が必要です。<br>C, D. S3低頻度アクセスはGlacierより高コストです。" },
            { q: "48. あるアプリケーションは、開発環境 (DEV) と本番環境 (PROD)で構成されています。DEV環境のAmazon EC2インスタンスは、営業時間に毎日10時間実行されます。一方、PROD環境のEC2インスタンスは、毎日24時間実行されています。ソリューションアーキテクトであるあなたは、コストを最小限に抑えるためにコンピューティングインスタンスの購入戦略を決定する必要があります。次のうち、最も費用対効果の高い方法はどれですか。", options: ["DEV環境にはスポットインスタンス、PROD環境にはオンデマンドインスタンスを使用する", "DEV環境にはオンデマンドインスタンス、PROD環境にはスポットインスタンスを使用する", "DEV環境にはスケジュールされたリザーブドインスタンス、PROD環境にはリザーブドインスタンスを使用する", "DEV環境にはオンデマンドインスタンス、PROD環境にはスケジュールされたリザーブドインスタンスを使用する"], correct: "c", explanation: "正解: C<br>DEV環境は決まった時間（毎日10時間）にのみ起動するため、その時間帯を予約するスケジュールされたリザーブドインスタンスが最適です。PROD環境は24時間稼働するため、大幅な割引が適用される標準のリザーブドインスタンスが最も費用対効果が高くなります。したがって、Cが正解です。<br>A. DEV環境は営業時間に稼働することが要求されているため、中断の可能性があるスポットインスタンスは適切ではありません。<br>B. PROD環境は24時間稼働するため、中断の可能性があるスポットインスタンスは適切ではありません。<br>D. PROD環境は24時間稼働するため、スケジュールされたリザーブドインスタンスよりも標準のリザーブドインスタンスのほうが費用対効果は高いと考えられます。" },
            { q: "49. あなたの会社では、Application Load Balancerに登録されたAmazon EC2 インスタンスでWebサイトを運用しており、DNSにはAmazon Route 53を使用しています。同社は、メインのWebサイトがダウンした場合に、ユーザーがアクセス可能なバックアップサイトを構築したいと考えています。これらの要件を満たすソリューションとして、次のうちどれが最も適切ですか。", options: ["バックアップサイトにAmazon S3のWebサイトホスティングを利用し、Amazon Route 53のフェイルオーバールーティングポリシーを設定する", "バックアップサイトにAmazon S3のWebサイトホスティングを利用し、Amazon Route 53のレイテンシールーティングポリシーを設定する", "アプリケーションを別のリージョンにデプロイし、ELBのヘルスチェックを使用してフェイルオーバールーティングを行う", "アプリケーションを別のリージョンにデプロイし、メインサイトのサーバーサイドでリダイレクトを設定する"], correct: "a", explanation: "正解: A<br>バックアップサイトを低コストなAmazon S3の静的Webサイトホスティングで用意し、Amazon Route 53のフェイルオーバールーティングポリシーを設定することで、メインサイト（プライマリ）の障害をヘルスチェックで検知した際に、自動でバックアップサイト（セカンダリ）へ切り替えることができます。したがって、Aが正解です。<br>B. Route 53のレイテンシールーティングを設定すると、レイテンシーが少ないサイトへ接続するため、メインサイト稼働中でもバックアップサイトに接続する場合があります。<br>C. ELBはリージョンをまたいだ冗長化を行うことはできません。<br>D. メインサイトのサーバーがダウンするとサーバーはユーザーからのアクセスを受け付けないため、バックアップサイトへのリダイレクトを行うことができません。" },
            { q: "50. 米国からアクセスしているユーザーにだけ画像を配信したいと考えています。次のうち、適切な方法はどれですか。", options: ["NATインスタンスでIPアドレスを制限する", "セキュリティグループを利用する", "Amazon S3に画像ファイルを格納し、バケットポリシーを設定する", "Amazon CloudFrontの地域制限配信を利用する", "Amazon API Gatewayを利用する"], correct: "d", explanation: "正解: D<br>Amazon CloudFrontには地域制限（地理的ブロッキング）の機能があり、これを使用すると特定の国や地域のユーザーにコンテンツを配信したり、逆にブロックすることができます。国単位での制御に最も適しています。したがって、Dが正解です。" },
            { q: "51. ある会社では、インターネット向けにWebアプリケーションを構築し、サービスを運営しています。このWebアプリケーションは、Amazon CloudFront、Application Load Balancer、Amazon EC2で構成されており、CloudFront のオリジンサーバーとしてApplication Load Balancerを設定しています。アクセスログから、最近ある特定のIPアドレスから悪意のある攻撃が検知されています。今後のセキュリティ対策のために、特定のIPアドレスをブロックする方法として最適なソリューションはどれですか。", options: ["Application Load Balancer配下にあるEC2のセキュリティグループで、特定のIPアドレスからのアクセスをブロックする", "AWS WAFをAmazon CloudFrontに設定し、WAFのIPアドレスマッチ条件を使用して特定のIPアドレスからのアクセスを遮断する", "Application Load Balancer配下にあるEC2のネットワークACLで、特定のIPアドレスからのアクセスをブロックする", "Amazon CloudFrontの設定で、特定のIPアドレスからのアクセスをブロックする"], correct: "b", explanation: "正解: B<br>AWS WAFは、Webアプリケーションファイアウォールであり、IPアドレスに基づくアクセス制御やSQLインジェクションなどの一般的な攻撃からの保護を提供します。CloudFrontと統合することで、エッジ（ユーザに最も近い場所）で悪意のあるリクエストをブロックでき、最も効果的かつ適切な対策となります。したがって、Bが正解です。<br>A.、C. CloudFrontを利用している構成では、EC2から見える送信元IPアドレスはCloudFrontのものになるため、セキュリティグループやネットワークACLで攻撃元のIPアドレスを直接ブロックすることはできません。<br>D. CloudFront自体に特定のIPアドレスをブロックする直接的な機能はありません。この機能はWAFが提供します。" },
            { q: "52. Auto Scalingを設定したアプリケーションAとアプリケーションBが同じサブネットで動作しています。アプリケーションAからアプリケーションBへの通信は許可しますが、アプリケーションBからアプリケーションAへの通信は拒否したい場合の設定として、正しい方法はどれですか (2つ選択)。", options: ["アプリケーションAのセキュリティグループの設定で、アプリケーションBのIPアドレスからのインバウンド通信設定を行わない", "アプリケーションAのセキュリティグループの設定で、アプリケーションBのIPアドレスからのインバウンド通信を拒否する", "アプリケーションBのセキュリティグループの設定で、アプリケーションAのIPアドレス以外のアウトバウンド通信を許可する", "サブネットに設定されたネットワークACLで、アプリケーションAのIPアドレスからのインバウンド通信を許可する", "サブネットに設定されたネットワークACLで、アプリケーションBのIPアドレスのインバウンド通信を拒否する"], correct: ["a", "c"], explanation: "この設問はAWSのネットワークセキュリティの理解を問うものですが、選択肢が不正確または紛らわしいです。より正確なAWSのベストプラクティスに基づくと、以下のような設定が考えられます。<br>1. アプリケーションA用のセキュリティグループ（SGA）と、アプリケーションB用のセキュリティグループ（SGB）を作成します。<br>2. SGBのインバウンドルールで、ソースとしてSGAを指定し、必要なポートを許可します。（A→Bの許可）<br>3. SGAのインバウンドルールでは、ソースとしてSGBを指定したルールを追加しません。セキュリティグループはデフォルトで全てのインバウンド通信を拒否するため、これによりB→Aの通信はブロックされます。<br>この考え方に最も近いのは、選択肢AとCの意図するところですが、表現が不正確です。IPアドレスではなくセキュリティグループIDで制御するのがベストプラクティスです。また、ネットワークACLは同じサブネット内の通信には影響しません。（補足：元のPDFの回答は誤っている可能性が高いです）" },
            { q: "53. ある会社では、レガシーなシステムで利用しているレガシーサーバーにおいて、独自のファイルシステムを使用したアプリケーションを運用しています。レガシーサーバーをAWSに移行する際に使用すべきストレージサービスは、次のうちどれですか。", options: ["Amazon EBS", "Amazon EFS", "Amazon S3", "Amazon S3 Glacier", "Amazon DynamoDB"], correct: "a", explanation: "正解: A<br>Amazon EBSはブロックストレージであり、EC2インスタンスにアタッチした後、OSレベルで任意のファイルシステム（独自のものを含む）でフォーマットして使用することができます。したがって、Aが正解です。<br>B. Amazon EFSはNFSv4プロトコルに基づいたファイルシステムを提供します。<br>C. Amazon S3はオブジェクトストレージです。<br>D. Amazon S3 Glacierはアーカイブ用ストレージです。<br>E. Amazon DynamoDBはNoSQLデータベースです。" },
            { q: "54. ある会社では、工場からリアルタイムでIoTデータを収集し、ディスクストレージに保存しています。最近になって収集対象のデータ量が増加し、スループットに問題が発生しています。ソリューションアーキテクトであるあなたは、インメモリデータベースに移行することでスループットの改善を検討しています。可用性が高く、スループットの向上が見込めるソリューションは次のうちどれですか。", options: ["Amazon RDS for PostgreSQL", "Amazon Aurora", "Amazon ElastiCache for Redis", "Amazon ElastiCache for Memcached"], correct: "c", explanation: "正解: C<br>インメモリデータベースとしては、Amazon ElastiCacheが利用できます。ElastiCacheはMemcachedとRedisをサポートしますが、高可用性（マルチAZレプリケーションなど）やデータの永続性オプションが求められる場合にはRedisが適しています。Redisは高速なインメモリデータストアとして機能し、スループットの問題を解決できます。したがって、Cが正解です。<br>A, B. これらはディスクベースのデータベースであり、インメモリソリューションではありません。<br>D. Memcachedは主にキャッシング用途で利用され、Redisのような高可用性機能や豊富なデータ構造は持っていません。" },
            { q: "55. Amazon DynamoDB Accelerator (DAX) の説明として、適切な項目はどれですか (2つ選択)。", options: ["Amazon DynamoDBよりもパフォーマンスは劣るが、コスト効率のよいNoSQL型のデータベースサービスである", "Amazon S3に格納した半構造データを一定時間ごとにAmazon DynamoDBに読み込み、S3にアクセスすることなくS3内のデータを扱うことができるサービスである", "Amazon DynamoDBのインメモリキャッシュサービスである", "1秒あたり100万回単位のリクエスト処理でも、数ミリ秒のレイテンシーを実現できる", "フルマネージド型のサービスであるAmazon DynamoDBのスケーリングルールを設定できる機能である"], correct: ["c", "d"], explanation: "正解: C, D<br>Amazon DynamoDB Accelerator (DAX)は、フルマネージドで高可用性なDynamoDB専用のインメモリキャッシュです。DAXはDynamoDBへの読み込みリクエストをキャッシュし、応答時間をミリ秒からマイクロ秒に短縮します。これにより、1秒あたり数百万リクエストの規模でも高速なパフォーマンスを実現します。したがって、CとDが正解です。（補足：元のPDFでは正解がC, Dでしたが、選択肢DはDAXではなくDynamoDB自体のパフォーマンス特性を指している可能性があります。しかし、DAXがそのパフォーマンス達成に大きく貢献するため、文脈上正解と判断します）" },
            { q: "56. セキュリティチームに属しているあなたは、会社が所有しているすべてのAWSアカウントで特定のサービスまたはアクションへのアクセスを制限することを検討しています。すべてのAWSアカウントは、AWS Organizationsの組織で構成されています。アクセス許可を設定する箇所は単一かつスケーラブルである必要があります。これらの要件を満たす方法として適切な対応は次のうちどれですか。", options: ["ACLを作成し、サービスまたはアクションへのアクセスを制限する", "アカウントを許可するセキュリティグループを作成し、ユーザーグループにアタッチする", "各アカウントにクロスアカウントロールを作成して、サービスまたはアクションへのアクセスを拒否する", "サービスまたはアクションへのアクセスを拒否するために、ルート組織単位でサービスコントロールポリシーを作成する"], correct: "d", explanation: "正解: D<br>AWS Organizationsのサービスコントロールポリシー (SCP) を利用することで、組織（OU）または個々のアカウントに対して許可ガードレールを一元的に設定できます。ルート組織単位にSCPを適用すれば、組織内のすべてのAWSアカウントにポリシーが継承され、単一の場所からスケーラブルにアクセスを制限できます。したがって、Dが正解です。<br>A, B. ACLやセキュリティグループは、Organizationsレベルでのサービスアクセス制御には使用しません。<br>C. クロスアカウントロールはアカウントごとに設定が必要であり、スケーラブルではありません。" },
            { q: "57. AWSをセキュアに利用するためのサービスや利用方法に関する説明として、誤っている項目はどれですか。", options: ["すでにS3に保存しているオブジェクトをAWS KMSのキーを利用して暗号化することができる", "AWS KMSでは作成した鍵の管理は可能だが、鍵の無効化や削除はできない", "AWS CloudHSMは、AWSのデータセンター内に配置されるユーザー占有のハードウェアアプライアンスである", "AWS CloudHSMは、セキュリティコンプライアンス要件が厳しい場合に適用する"], correct: "b", explanation: "正解: B<br>AWS KMSは、鍵のライフサイクル全体を管理するためのマネージドサービスであり、鍵の作成、有効化、無効化、ローテーション、削除のスケジュール設定などが可能です。したがって、「鍵の無効化や削除はできない」という記述は誤りです。" },
            { q: "58. ある会社では、月次の出勤管理簿データをPDFファイルでAmazon S3バケットに保存しています。総務部は、前月分の出勤管理簿データに頻繁にアクセスします。前月分より過去の出勤管理簿データにはあまりアクセスしませんが、必要に応じてすぐにデータを取得する必要があります。この会社には多くの従業員がいるため、S3バケットのデータ保存にかかるコストの削減を検討しています。出勤管理簿データをS3バケットに保存する方法として、費用対効果が高く耐久性も損なわない項目はどれですか。", options: ["過去の出勤管理簿データを定期的にAmazon S3 Glacierに手動でアーカイブする", "Amazon S3のライフサイクルルールの設定により、前月分より過去のデータを標準低頻度アクセス (Standard - Infrequent Access) に移行する", "Amazon S3のライフサイクルルールの設定により、前月分より過去のデータを1ゾーン低頻度アクセス (One Zone - Infrequent Access) に移行する", "出勤管理簿データをバイナリ変換してAmazon RDSに保存する"], correct: "b", explanation: "正解: B<br>S3 Standard-Infrequent Access (標準-IA) は、アクセス頻度は低いものの、必要になった際にはすぐに取り出す必要があるデータに適したストレージクラスです。標準クラスと同じ高い耐久性を持ちながら、ストレージ料金は安価です。ライフサイクルルールを設定して、一定期間（例：30日）経過したデータを自動的に標準-IAに移行させるのが最も費用対効果の高い方法です。したがって、Bが正解です。<br>A. Glacierはアーカイブ用であり、「すぐに取得する」という要件を満たしません。<br>C. 1ゾーン-IAは単一のAZにしかデータを保存しないため、耐久性が低く、出勤管理簿のような重要データには不向きです。<br>D. RDSにPDFを保存するのは非効率でコストも高くなります。" },
            { q: "59. あなたの会社は、Webサービスを運用しています。Webアプリケーションサーバーは、VPC内のプライベートサブネットに配置されたデータベースへ接続しています。ソリューションアーキテクトであるあなたは、セキュリティ強化のために、以下のセキュリティ要件に従い設計を行う必要があります。・Webアプリケーションサーバーは、インターネットからのSSL (HTTPS接続) を受け付ける・データベースサーバーは、Webアプリケーションサーバーからの接続のみ受け付ける。運用中のサービスへの影響を最小限にするセキュリティ設定は、次のうちどれですか (2つ選択)。", options: ["ネットワークACLで、Webアプリケーションサーバーのサブネットに対し、HTTPS接続のインバウンド通信をすべて許可、アウトバウンド通信をすべて拒否する", "セキュリティグループで、データベースサーバーの接続ポートを開放し、Webアプリケーションサーバーのセキュリティグループからの接続のみ許可する", "データベースサーバーを、Webアプリケーションサーバーと同じサブネットに再配置する", "ネットワークACLで、プライベートサブネットに対し、データベースサーバーの接続ポートへのインバウンド通信をすべて許可、アウトバウンド通信をすべて拒否する", "セキュリティグループで、WebアプリケーションサーバーのHTTPS ポートを開放し、インターネット (0.0.0.0/0) からの接続を許可する"], correct: ["b", "e"], explanation: "正解: B, E<br>セキュリティグループを利用して、ステートフルなファイアウォールをリソースレベルで設定するのがベストプラクティスです。Webサーバーのセキュリティグループでは、インターネット(0.0.0.0/0)からのHTTPS(ポート443)のインバウンド通信を許可します(E)。データベースサーバーのセキュリティグループでは、インバウンド通信のソースとしてWebアプリケーションサーバーのセキュリティグループIDを指定し、データベースのポート(例:3306)へのアクセスのみを許可します(B)。これにより、Webサーバーからのみデータベースに接続できるようになります。したがって、BとEが正解です。<br>A, D. ネットワークACLはステートレスであり、アウトバウンドを全て拒否すると戻りの通信もブロックされてしまうため不適切です。" },
            { q: "60. Amazon EC2 インスタンスとAmazon DynamoDBを利用してアプリケーションを開発し、利用者にサービス提供している企業があります。あるとき、このアプリケーションを利用している複数のユーザーから、削除したはずのデータが表示されてしまうことがあると相談を受けました。あなたが行うべき対策として適切な方法は、次のうちどれですか。", options: ["Amazon DynamoDB グローバルテーブルを利用する", "Amazon DynamoDB ストリームを利用する", "キャパシティモードはオンデマンドを選択する", "Consistent Readの設定を有効にする"], correct: "d", explanation: "正解: D<br>Amazon DynamoDBのデフォルトの読み取り動作は「結果整合性のある読み取り (Eventually Consistent Read)」です。これは、直前の書き込みが反映されていない古いデータを読み取る可能性がある代わりに、高い読み取りスループットを実現します。削除したはずのデータが表示されるのはこのためです。データの一貫性が求められる場合は、「強力な整合性のある読み取り (Strongly Consistent Read)」オプションを有効にする必要があります。これを`ConsistentRead`パラメータで指定します。したがって、Dが正解です。" },
            { q: "61. プライベートサブネット内のAmazon EC2 インスタンスから、インターネットへのIPv6トラフィックを確立する必要があります。また、自動的にスケールされ、かつ追加費用が発生しないようにしなければなりません。次のうち、この要件を満たすサービスはどれですか。", options: ["Egress-Onlyインターネットゲートウェイ", "NATゲートウェイ", "カスタムNATインスタンス", "VPCエンドポイント"], correct: "a", explanation: "正解: A<br>Egress-Onlyインターネットゲートウェイは、VPC内のIPv6トラフィックがインターネットへ出ていくこと（アウトバウンド）を許可し、インターネットからVPC内への意図しない接続（インバウンド）を防ぐためのサービスです。ステートフルであり、マネージドサービスとして自動的にスケールし、追加料金はかかりません。したがって、Aが正解です。<br>B. NATゲートウェイはIPv4向けであり、利用料金が発生します。<br>C. カスタムNATインスタンスは自分で管理・スケールさせる必要があり、インスタンス料金がかかります。<br>D. VPCエンドポイントはAWSサービスへのプライベート接続用です。" },
            { q: "62. プライベートサブネット内のAmazon EC2 インスタンスから、インターネットを経由せずにAmazon S3を利用する適切な方法は、次のうちどれですか。", options: ["EC2インスタンス用のVPCエンドポイントを作成し、ルートテーブルにAmazon S3のターゲットを設定する", "EC2 インスタンス用のVPCエンドポイントインターフェイスを作成する", "Amazon S3用のVPCエンドポイントを作成し、ルートテーブルにAmazon S3のターゲットを設定する", "Amazon S3用のVPCエンドポイントインターフェイスを作成する"], correct: "c", explanation: "正解: C<br>プライベートサブネットからインターネットを経由せずにAmazon S3にアクセスするには、ゲートウェイ型のVPCエンドポイントを使用します。S3用のゲートウェイエンドポイントを作成し、プライベートサブネットのルートテーブルで、S3へのトラフィックのターゲットとしてそのエンドポイントを指定します。したがって、Cが正解です。<br>S3とDynamoDBがゲートウェイ型エンドポイントを、その他の多くのサービスがインターフェイス型エンドポイントを使用します。" },
            { q: "63. ある企業が全国テレビキャンペーンを実施しています。同社では、このキャンペーンによって、毎分5件のリクエストから毎分5,000件以上のリクエストにトラフィックが増加すると予想しています。システムは、Node.jsで動作するアプリケーションです。トラフィック急増を確実に処理するための適切なサービスもしくは方法は、次のうちどれですか。", options: ["AWS Lambda", "Amazon ElastiCache", "想定の負荷を処理できる数のEC2インスタンスを用意する", "Auto Scalingグループを作成し、EC2インスタンスをスケールアウトする"], correct: "d", explanation: "正解: D<br>Auto Scalingグループを設定することで、トラフィックの増減に応じてEC2インスタンスの数を自動的にスケールアウト（増加）・スケールイン（減少）させることができます。これにより、トラフィックの急増に柔軟に対応しつつ、コストを最適化できます。したがって、Dが正解です。<br>A. AWS Lambdaもスケーラブルですが、突発的な超大量リクエストの場合、コールドスタートによるレイテンシや同時実行数の上限に達する可能性があります。確実性を求めるなら、事前にウォームアップさせたEC2とAuto Scalingの組み合わせが堅実です。<br>C. 事前に固定数のインスタンスを用意する方法は、想定以上のトラフィックに対応できず、また通常時のコストが無駄になります。" },
            { q: "64. あなたは、常時アクセス可能な社内の共有ファイルシステムを設計しています。チームごとにそれぞれ独立したディレクトリを持ち、ユーザーは自分のチームが所有するファイルだけにアクセスできるようにファイルを保護したいと考えています。次のうち適切な設計方針はどれですか。", options: ["Amazon EFSを利用し、ファイル単位でアクセス制御を行う", "Amazon S3を利用し、ACLによるアクセス制御を行う", "Amazon S3を利用し、IAMによるアクセス制御を行う", "Amazon EFSを利用し、セキュリティグループによるアクセス制御を行う"], correct: "a", explanation: "正解: A<br>Amazon EFSはNFSベースの共有ファイルシステムであり、Linuxの標準的な所有権やアクセス許可（パーミッション）を使用して、ディレクトリやファイル単位での細かいアクセス制御が可能です。EC2インスタンスにマウントして利用するため、従来のファイルサーバーと同じ感覚で管理できます。したがって、Aが正解です。<br>B, C. Amazon S3はオブジェクトストレージであり、ディレクトリ構造は擬似的なものです。IAMポリシーやバケットポリシーでアクセス制御を行いますが、ファイルシステムとしてのPOSIX準拠のアクセス制御とは異なります。<br>D. セキュリティグループはネットワークレベルのアクセス制御（どのインスタンスからマウントできるか等）を行い、ファイルやディレクトリ単位のアクセス制御は行いません。" },
            { q: "65. あなたは、アジア各国に支社がある企業の本社で情報システム部門に所属しています。この企業の経営会議では、毎日Amazon Redshiftに蓄積される業務データを用いて打ち合わせが行われるため、あなたは前日分のデータの分析結果を準備しています。この分析には多くのクエリを実行する必要がありますが、通常は各支社がデータを格納し、そのデータを分析するための時間が十分にあります。また、時差があるので、Redshiftのクエリ処理も問題なく実行できています。しかし、支社の状況によっては、まれにRedshiftへのデータ格納が遅れることがあります。そのような場合でも確実に分析結果を提供する必要があるため、Redshiftのクエリ数が多くなった場合に、処理数に応じてスケールして処理できるようにしたいと考えています。次のうち、適切なソリューションはどれですか。", options: ["処理待ちのクエリをSQSに格納する", "クロスリージョンスナップショットを利用する", "ノード数を増やす", "Redshift concurrency scalingを有効にする"], correct: "d", explanation: "正解: D<br>RedshiftのConcurrency Scaling（同時実行スケーリング）を有効にすると、メインクラスターのクエリが増加して待機が発生した場合に、追加のクラスター容量を自動的にプロビジョニングして、クエリを並列処理します。これにより、突発的なクエリの集中にも対応でき、安定したパフォーマンスを提供できます。したがって、Dが正解です。<br>A. クエリはRedshift内部のキューで管理されるため、SQSは不要です。<br>B. クロスリージョンスナップショットはDR（災害復旧）のための機能です。<br>C. 恒久的にノード数を増やすのはコスト効率が悪く、一時的な負荷の増大に対応する設問の要件には最適ではありません。" }
        ];

        function shuffleAndRegenerate() {
            for (let i = questions.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [questions[i], questions[j]] = [questions[j], questions[i]];
            }
            document.getElementById('quiz').innerHTML = '';
            document.getElementById('score').innerHTML = '';
            generateQuiz();
        }


        function generateQuiz() {
            const quiz = document.getElementById('quiz');
            quiz.innerHTML = '';
            const totalQuestions = questions.length;
            document.querySelector('p').textContent = `全${totalQuestions}問`;

            questions.forEach((q, index) => {
                const div = document.createElement('div');
                div.className = 'question';
                div.id = `q-container-${index}`;

                const header = document.createElement('div');
                header.className = 'question-header';
                // 統一された問題番号の表示ロジック
                header.innerHTML = `<strong>問 ${index + 1}. ${q.q.substring(q.q.indexOf('.') + 1)}</strong>`;
                div.appendChild(header);

                const optionsDiv = document.createElement('div');
                optionsDiv.className = 'question-options';
                q.options.forEach((opt, i) => {
                    const label = document.createElement('label');
                    const input = document.createElement('input');
                    const value = String.fromCharCode(97 + i);
                    input.type = q.correct instanceof Array ? 'checkbox' : 'radio';
                    input.name = `q${index}`;
                    input.value = value;
                    label.appendChild(input);

                    const optionPrefix = String.fromCharCode(65 + i) + '. ';
                    label.appendChild(document.createTextNode(' ' + optionPrefix + opt));
                    label.setAttribute('data-value', value);
                    optionsDiv.appendChild(label);
                });
                div.appendChild(optionsDiv);

                const toggleBtn = document.createElement('button');
                toggleBtn.textContent = '解説の表示/非表示';
                toggleBtn.className = 'toggle-explanation-btn';
                div.appendChild(toggleBtn);

                const expl = document.createElement('div');
                expl.className = 'explanation';
                // 統一された解説の表示ロジック
                expl.innerHTML = `<strong>解答解説:</strong><br>${q.explanation}`;
                div.appendChild(expl);

                toggleBtn.addEventListener('click', () => {
                    expl.classList.toggle('visible');
                });

                quiz.appendChild(div);
            });
        }


        function checkAnswer(index, isGrading) {
            const qData = questions[index];
            const questionDiv = document.getElementById(`q-container-${index}`);

            const selectedInputs = Array.from(questionDiv.querySelectorAll(`input[name="q${index}"]:checked`));
            const selectedValues = selectedInputs.map(input => input.value);

            let isCorrect;
            const correctAnswers = Array.isArray(qData.correct) ? qData.correct : [qData.correct];

            if (Array.isArray(qData.correct)) {
                isCorrect = (selectedValues.length === qData.correct.length) &&
                    selectedValues.sort().every((val, idx) => val === [...qData.correct].sort()[idx]);
            } else {
                isCorrect = (selectedValues.length === 1 && selectedValues[0] === qData.correct);
            }

            questionDiv.querySelectorAll('.question-options label').forEach(label => {
                label.classList.remove('correct-choice', 'incorrect-choice');
            });

            if (isGrading) {
                // 正解の選択肢をハイライト
                correctAnswers.forEach(correctValue => {
                    const correctLabel = questionDiv.querySelector(`label[data-value="${correctValue}"]`);
                    if (correctLabel) {
                        correctLabel.classList.add('correct-choice');
                    }
                });

                // ユーザーが選択した不正解の選択肢をハイライト
                selectedValues.forEach(selectedValue => {
                    if (!correctAnswers.includes(selectedValue)) {
                        const incorrectLabel = questionDiv.querySelector(`label[data-value="${selectedValue}"]`);
                        if (incorrectLabel) {
                            incorrectLabel.classList.add('incorrect-choice');
                        }
                    }
                });
                
                questionDiv.querySelector('.explanation').classList.add('visible');
            }

            return isCorrect;
        }

        function grade() {
            let correctCount = 0;
            const totalQuestions = questions.length;

            questions.forEach((qData, index) => {
                if (checkAnswer(index, false)) { // ここではハイライトせず、正誤判定のみ
                     correctCount++;
                }
            });
            
            // 全問の正解・不正解をハイライト表示
            showAllAnswers();

            const percentage = (correctCount / totalQuestions) * 100;
            const scoreEl = document.getElementById('score');
            scoreEl.innerHTML = `あなたのスコア: ${correctCount} / ${totalQuestions}問 正解 (${percentage.toFixed(1)}%)`;
            
            const passPercentage = 72.3; // SAA-C03の合格ラインは約72.3% (47/65問)

            if (percentage >= passPercentage) {
                scoreEl.innerHTML += `<br><span class="result-pass">🎉 合格おめでとうございます！</span>`;
            } else {
                scoreEl.innerHTML += `<br><span class="result-fail">📘 あと少し！頑張りましょう！</span>`;
            }
        }

        function showAllAnswers() {
            questions.forEach((qData, index) => {
                checkAnswer(index, true); 
            });
        }

        function clearAllHighlights() {
            document.querySelectorAll('.question-options label').forEach(label => {
                label.classList.remove('correct-choice', 'incorrect-choice');
            });
            document.querySelectorAll('.explanation').forEach(el => {
                el.classList.remove('visible');
            });
            document.getElementById('score').innerHTML = '';
        }

        // ページ読み込み時にクイズを生成
        window.onload = function() {
            generateQuiz();
        };

    </script>

</body>

</html>
